<button class="btn bg-p-green border-2 border-d-green" type="button" id="sortDropdown" data-bs-toggle="dropdown"
    aria-expanded="false">
    Sort By:
    {% if sort == 'alpha' %}
    {% if direction == 'asc' %}
    Alphabetical, A-Z
    {% else %}
    Alphabetical, Z-A
    {% endif %}
    {% endif %}
    {% if sort == 'date' %}
    {% if direction == 'asc' %}
    Oldest
    {% else %}
    Newest
    {% endif %}
    {% endif %}
    {% if sort == 'distance' %}
    Distance (Ascending)
    {% endif %}
    <i class="fas fa-caret-down"></i>
</button>
<ul class="dropdown-menu dropdown-menu-end position-absolute border-d-green border border-2"
    aria-labelledby="sortDropdown">
    <li class="dropdown-item">
        <a id="" class="product-sort-link nav-link text-end" href="#" data-bs-toggle="modal"
            data-bs-target="#distanceModal">Distance (Ascending)</a>
    </li>
    <li class="dropdown-item">
        <a id="sortAlphaAsc" class="product-sort-link nav-link text-end" href="#">Alphabetical, A-Z</a>
    </li>
    <li class="dropdown-item">
        <a id="sortAlphaDesc" class="product-sort-link nav-link text-end" href="#">Alphabetical, Z-A</a>
    </li>
    <li class="dropdown-item">
        <a id="sortDateDesc" class="product-sort-link nav-link text-end" href="#">Newest</a>
    </li>
    <li class="dropdown-item">
        <a id="sortDateAsc" class="product-sort-link nav-link text-end" href="#">Oldest</a>
    </li>
</ul>

<div class="modal fade" id="distanceModal" tabindex="-1" aria-labelledby="distanceModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="distanceModalLabel">Share your location</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            {% if request.user.is_authenticated %}
            {% if request.user.profile.address.location %}
            <div class="modal-body">
                You can use your profile address to sort products by distance. <br>
                <button id="useProfileAddressButton" type="button" class="btn btn-sm cta-button-secondary">Use my
                    address</button>
            </div>
            {% else %}
            <div class="modal-body">
                You can add an address to your profile to sort products. <br>
                <a class="btn btn-sm cta-button-secondary" href="{% url 'profile-edit' %}">Edit Profile</a>
            </div>
            {% endif %}
            <div class="modal-body">
            Or share your device location:
            </div>
            {% else %}
            <div class="modal-body">
                To sort by distance you need to share your device location
            </div>
            {% endif %}
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary text-l-green" data-bs-dismiss="modal">Cancel</button>
                <button id="shareLocationButton" type="button" class="btn cta-button">Share Location</button>
            </div>
        </div>
    </div>
</div>